var main=function(e){var a={settings:{preload:!1,slideDuration:500,layoutDuration:750,thumbnailsPerRow:2,mainSide:"right"},$window:null,$body:null,$main:null,$thumbnails:null,$viewer:null,$toggle:null,$navNext:null,$navPrevious:null,slides:[],current:null,locked:!1,keys:{27:function(){a.toggle()},38:function(){a.up()},40:function(){a.down()},32:function(){a.next()},39:function(){a.next()},37:function(){a.previous()}},initProperties:function(){a.$window=e(window);a.$body=e("body");a.$thumbnails=e("#thumbnails");
a.$viewer=e('<div id="viewer"><div class="inner"><div class="nav-next"></div><div class="nav-previous"></div><div class="toggle"></div></div></div>').appendTo(a.$body);a.$navNext=a.$viewer.find(".nav-next");a.$navPrevious=a.$viewer.find(".nav-previous");a.$main=e("#main");e('<div class="toggle"></div>').appendTo(a.$main);a.$toggle=e(".toggle");9>skel.vars.IEVersion&&a.$window.on("resize",function(){window.setTimeout(function(){a.$viewer.css("width",a.$window.width()-a.$main.width())},100)}).trigger("resize")},
initEvents:function(){a.$window.on("load",function(){a.$body.removeClass("is-loading-0");window.setTimeout(function(){a.$body.removeClass("is-loading-1")},100);window.setTimeout(function(){a.$body.removeClass("is-loading-2")},100+Math.max(a.settings.layoutDuration-150,0))});var b;a.$window.on("resize",function(){a.$body.addClass("is-loading-0");window.clearTimeout(b);b=window.setTimeout(function(){a.$body.removeClass("is-loading-0")},100)});a.$viewer.on("touchend",function(){skel.breakpoint("medium").active&&
a.hide()});a.$viewer.on("touchstart",function(d){a.$viewer.touchPosX=d.originalEvent.touches[0].pageX;a.$viewer.touchPosY=d.originalEvent.touches[0].pageY}).on("touchmove",function(d){if(null!==a.$viewer.touchPosX&&null!==a.$viewer.touchPosY){var c=a.$viewer.touchPosX-d.originalEvent.touches[0].pageX,b=a.$viewer.touchPosY-d.originalEvent.touches[0].pageY;boundary=20;delta=50;b<boundary&&b>-1*boundary&&c>delta?a.next():b<boundary&&b>-1*boundary&&c<-1*delta&&a.previous();var c=a.$viewer.outerHeight(),
e=a.$viewer.get(0).scrollHeight-a.$viewer.scrollTop();if(0>=a.$viewer.scrollTop()&&0>b||e>c-2&&e<c+2&&0<b)d.preventDefault(),d.stopPropagation()}});a.$main.on("touchstart",function(d){skel.breakpoint("xsmall").active||(a.$main.touchPosX=d.originalEvent.touches[0].pageX,a.$main.touchPosY=d.originalEvent.touches[0].pageY)}).on("touchmove",function(d){if(!skel.breakpoint("xsmall").active&&null!==a.$main.touchPosX&&null!==a.$main.touchPosY){var c=a.$main.touchPosX-d.originalEvent.touches[0].pageX,b=a.$main.touchPosY-
d.originalEvent.touches[0].pageY;boundary=20;delta=50;result=!1;switch(a.settings.mainSide){case "left":result=b<boundary&&b>-1*boundary&&c>delta;break;case "right":result=b<boundary&&b>-1*boundary&&c<-1*delta}result&&a.hide();var c=a.$main.outerHeight(),e=a.$main.get(0).scrollHeight-a.$main.scrollTop();if(0>=a.$main.scrollTop()&&0>b||e>c-2&&e<c+2&&0<b)d.preventDefault(),d.stopPropagation()}});a.$toggle.on("click",function(){a.toggle()});a.$toggle.on("touchend",function(a){a.stopPropagation()});a.$navNext.on("click",
function(){a.next()});a.$navPrevious.on("click",function(){a.previous()});a.$body.on("keydown","input,select,textarea",function(a){a.stopPropagation()});a.$window.on("keydown",function(b){!skel.breakpoint("xsmall").active&&b.keyCode in a.keys&&(b.stopPropagation(),b.preventDefault(),a.keys[b.keyCode]())})},initViewer:function(){a.$thumbnails.on("click",".thumbnail",function(b){var d=e(this);b.preventDefault();b.stopPropagation();a.locked&&d.blur();a.switchTo(d.data("index"))});a.$thumbnails.children().each(function(){var b=
e(this),d=b.children(".thumbnail"),c;c={$parent:b,$slide:null,$slideImage:null,$slideCaption:null,url:d.attr("href"),loaded:!1};b.attr("tabIndex","-1");c.$slide=e('<div class="slide"><div class="caption"></div><div class="image"></div></div>');c.$slideImage=c.$slide.children(".image");c.$slideImage.css("background-image","").css("background-position",d.data("position")||"center");c.$slideCaption=c.$slide.find(".caption");b.children().not(d).appendTo(c.$slideCaption);a.settings.preload&&(e('<img src="'+
c.url+'" />'),c.$slideImage.css("background-image","url("+c.url+")"),c.$slide.addClass("loaded"),c.loaded=!0);a.slides.push(c);d.data("index",a.slides.length-1)})},init:function(){10>skel.vars.IEVersion&&(a.settings.slideDuration=0,a.settings.layoutDuration=0);skel.breakpoints({xlarge:"(max-width: 1680px)",large:"(max-width: 1280px)",medium:"(max-width: 980px)",small:"(max-width: 736px)",xsmall:"(max-width: 480px)"});a.initProperties();a.initViewer();a.initEvents();window.setTimeout(function(){skel.on("-xsmall !xsmall",
function(){null===a.current&&a.switchTo(0,!0)})},0)},switchTo:function(b,d){if((a.current!=b||skel.breakpoint("xsmall").active)&&!a.locked){a.locked=!0;!d&&(skel.breakpoint("medium").active&&8<skel.vars.IEVersion)&&a.hide();var c=null!==a.current?a.slides[a.current]:null,f=a.slides[b];a.current=b;c&&(c.$parent.removeClass("active"),c.$slide.removeClass("active"));f.$parent.addClass("active").focus();var g=function(){c&&c.$slide.detach();f.$slide.appendTo(a.$viewer);f.loaded?window.setTimeout(function(){f.$slide.addClass("active");
window.setTimeout(function(){a.locked=!1},100)},100):window.setTimeout(function(){f.$slide.addClass("loading");e('<img src="'+f.url+'" />').on("load",function(){f.$slideImage.css("background-image","url("+f.url+")");f.loaded=!0;f.$slide.removeClass("loading");f.$slide.addClass("active");window.setTimeout(function(){a.locked=!1},100)})},100)};c?window.setTimeout(g,a.settings.slideDuration):g()}},next:function(){var b=a.current;a.switchTo(b>=a.slides.length-1?0:b+1)},previous:function(){var b=a.current,
d=a.slides.length;a.switchTo(0>=b?d-1:b-1)},up:function(){if(!a.$body.hasClass("fullscreen")){var b=a.current,d=a.slides.length,c=a.settings.thumbnailsPerRow;a.switchTo(b<=c-1?d-(c-1-b)-1:b-c)}},down:function(){if(!a.$body.hasClass("fullscreen")){var b=a.current,d=a.slides.length,c=a.settings.thumbnailsPerRow;a.switchTo(b>=d-c?b-d+c:b+c)}},show:function(){a.$body.hasClass("fullscreen")&&(a.$body.removeClass("fullscreen"),a.$main.focus())},hide:function(){a.$body.hasClass("fullscreen")||(a.$body.addClass("fullscreen"),
a.$main.blur())},toggle:function(){a.$body.hasClass("fullscreen")?a.show():a.hide()}};return a}(jQuery);main.init();
